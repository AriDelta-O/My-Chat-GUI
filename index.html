<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My-Chat-GUI</title>
  <link rel="stylesheet" href="style.css">
</head>
<body class="dark" data-session-id="">
  <!-- TOP BAR -->
  <header class="topbar">
    <div class="brand">My-Chat-GUI</div>
    <div class="controls">
      <button id="themeToggle" class="icon" title="Toggle theme">ðŸŒ™</button>
      <button id="clearBtn" class="ghost" title="Clear chat">Clear</button>
    </div>
  </header>
  <main class="wrap">
    <!-- CHAT SECTION -->
    <section class="chat-area card">
      <!-- Messages container -->
      <div id="messages" class="messages" aria-live="polite">
        <!-- Messages will be inserted here -->
      </div>
      <!-- USER INPUT BAR -->
      <form id="promptForm" class="prompt" autocomplete="off">
        <div class="input-wrap">
          <textarea id="promptInput"
            placeholder="Type a messageâ€¦ (Ctrl+/ to focus, Enter to send, Shift+Enter for new line)"
            rows="1"
            spellcheck="true"
            class="input-autoexpand"
            style="font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
                   -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;"></textarea>
          <button type="submit" id="sendBtn" class="send-btn disabled" aria-label="Send">
            <span class="icon" style="font-size: 20px;">âž¤</span>
            <span class="spinner" aria-hidden="true" style="display:none;">
              <svg class="spinner-icon" viewBox="0 0 50 50" width="18" height="18">
                <circle class="path" cx="25" cy="25" r="20"
                        fill="none" stroke="currentColor" stroke-width="5"/>
              </svg>
            </span>
          </button>
        </div>
      </form>
    </section>
    <!-- SIDE PANEL -->
    <aside class="side-panel card" id="sidePanel">
      <div class="panel-header">Context & Tools</div>
      <div class="panel-body">
        <!-- SESSION MANAGER -->
        <div class="panel-section">
          <h4>Sessions</h4>
          <div class="session-controls">
            <select id="sessionSelect"></select>
            <button id="newSessionBtn" class="mini-btn icon-only" title="New session (Ctrl+K)">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="12" y1="5" x2="12" y2="19"></line>
                <line x1="5" y1="12" x2="19" y2="12"></line>
              </svg>
            </button>
          </div>
          <div class="session-actions">
            <button id="renameSessionBtn" class="mini-btn">Rename</button>
            <button id="deleteSessionBtn" class="mini-btn danger">Delete</button>
          </div>
          <!-- Feature #7: Export/Import -->
          <div class="export-import-controls">
            <button id="exportBtn" class="mini-btn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="7 10 12 15 17 10"></polyline>
                <line x1="12" y1="15" x2="12" y2="3"></line>
              </svg>
              Export
            </button>
            <button id="importBtn" class="mini-btn">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                <polyline points="17 8 12 3 7 8"></polyline>
                <line x1="12" y1="3" x2="12" y2="15"></line>
              </svg>
              Import
            </button>
            <input type="file" id="importFile" accept=".json" style="display:none;">
          </div>
        </div>
        <!-- SETTINGS -->
        <div class="panel-section">
          <h4>Settings</h4>
          <label class="toggle-row">
            <span>Memory</span>
            <input type="checkbox" id="memoryToggle" checked>
          </label>
          <!-- Feature #17: Slider with value display -->
          <label class="slider-row">
            <span>Temperature</span>
            <input id="tempSlider" type="range" min="0" max="2" step="0.01" value="1">
            <span class="slider-value" id="tempValue">1.00</span>
          </label>
          <label class="slider-row">
            <span>Top-P</span>
            <input id="topPSlider" type="range" min="0" max="1" step="0.01" value="1">
            <span class="slider-value" id="topPValue">1.00</span>
          </label>
          <!-- Feature #8: Token counter -->
          <div style="margin-top: 12px;">
            <span class="token-counter" id="tokenCounter">~0 tokens</span>
          </div>
        </div>
        <!-- SYSTEM PROMPT -->
        <div class="panel-section">
          <h4>System Prompt</h4>
          <textarea id="systemPromptInput" placeholder="Optional system instruction..." rows="4"></textarea>
          <button id="saveSystemPromptBtn" class="mini-btn">Apply</button>
        </div>
        <!-- MODEL -->
        <div class="panel-section">
          <h4>Model</h4>
          <select id="modelSelect"></select>
          <button id="modelInfoBtn" class="mini-btn">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <line x1="12" y1="16" x2="12" y2="12"></line>
              <line x1="12" y1="8" x2="12.01" y2="8"></line>
            </svg>
            Info
          </button>
          <!-- Feature #9: Enhanced model info -->
          <div id="modelInfoBox" class="model-info hidden">
            <p id="modelInfoText">Select a model to view details.</p>
          </div>
        </div>
      </div>
    </aside>
  </main>
  <div id="toast" class="toast" aria-hidden="true"></div>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="script.js"></script>
</body>
</html>